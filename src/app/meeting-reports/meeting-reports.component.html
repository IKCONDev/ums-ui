<div>
    <app-side-menubar></app-side-menubar>
</div>
<div>
    <app-header [title]="title"></app-header>
</div>
<div class="container-fluid">
    <div class="card-body">
        <div *ngIf="reportType === 'department'">
            <div class="row">
                
                <div class="col-sm-5" style="margin-left: 50px;">
                    <div class="card">
                        <div class="card-header" style="background-color: #134E69D9;">
                            <h4 style="text-align: center;color: white;">Report Summary</h4>
                        </div>
                        <div style="margin-left: 30px;margin-top: 20px;">
                        <p>Report Module : <b>Meetings</b></p>
                        <p>Report Type : <b>Pie Chart</b></p>
                        <p>Department ID : <b>{{selectedDepartment}}</b></p>
                        <p>DepartmentName : <b>{{selectedDepartmentName}}</b></p>
                        <p>Total Meetings of the Department : <b>{{meetingsByDepartmentListCount}}</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-header">
                            <b>Meetings</b>
                        </div>
                        <div class="chart">
                            <div style="padding-top: 6px;"></div>
                            <ng-select id="select" [(ngModel)]="selectedDepartment" style="float: right; width: 250px;"
                                placeholder="choose" (change)="chooseDepartment()">
                                <ng-option *ngFor="let department of departmentList"
                                    value="{{department.departmentId}}">{{department.departmentName}}</ng-option>
                            </ng-select>
                            <canvas id="meetingsByDepartmentListChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <br/>
            <table class="table table-hover" *ngIf="meetingsByDepartmentListCount > 0; else noDeptMeetings">
                <thead>
                    <tr >
                        <th>ID</th>
                        <th>Title</th>
                        <th>Organizer</th>
                        <th>Start Date Time</th>
                        <th>End Date Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let meeting of meetingsByDepartmentList">
                        <td>{{meeting.meetingId}}</td>
                        <td>{{meeting.subject}}</td>
                        <td>{{meeting.organizerName}}</td>
                        <td>{{meeting.startDateTime}}</td>
                        <td>{{meeting.endDateTime}}</td>
                    </tr>
                </tbody>
            </table>
            <ng-template #noDeptMeetings>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Organizer</th>
                            <th>Start Date Time</th>
                            <th>End Date Time</th>
                        </tr>
                    </thead>
                    <tbody>
                </table>
                <p style="text-align: center;"><b>No Meetings from this department !</b></p>
               </ng-template>
        </div>
        <div *ngIf="reportType === 'employee'">
            <div class="row">
                <div class="col-sm-5" style="margin-left: 50px;">
                    <div class="card">
                        <div class="card-header" style="background-color: #134E69D9;">
                            <h4 style="text-align: center;color: white;">Report Summary</h4>
                        </div>
                        <div style="margin-left: 30px;margin-top: 20px;">
                        <p>Report Module : <b>Meetings</b></p>
                        <p>Report Type : <b>Bar</b></p>
                        <p>Total Meetings Organized : <b>{{organizedMeetingListCount}}</b></p>
                        <p>Organizer Name : <b>{{"Vaishnav Kannan"}}</b></p>
                        <p>Organizer Email ID : <b>{{selectedEmployee}}</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-header">
                            <b>Meetings</b>
                        </div>
                        <div class="chart">
                            <div style="padding-top: 6px;"></div>
                            <ng-select id="select" [(ngModel)]="selectedEmployee" style="float: right; width: 250px;"
                                placeholder="choose" (change)="chooseEmployee()">
                                <ng-option *ngFor="let employee of employeeListAsUser"
                                    value="{{employee.email}}">{{employee.firstName}} {{employee.lastName}}</ng-option>
                            </ng-select>
                            <canvas id="organizedmeetingListChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <table class="table table-hover" *ngIf="organizedMeetingListCount > 0; else noOrgMeetings">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Organizer</th>
                        <th>Start Date Time</th>
                        <th>End Date Time</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let meeting of organizedMeetingList">
                        <td>{{meeting.meetingId}}</td>
                        <td>{{meeting.subject}}</td>
                        <td>{{meeting.organizerName}}</td>
                        <td>{{meeting.startDateTime}}</td>
                        <td>{{meeting.endDateTime}}</td>
                    </tr>
                </tbody>
            </table>
            <ng-template #noOrgMeetings>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Organizer</th>
                            <th>Start Date Time</th>
                            <th>End Date Time</th>
                        </tr>
                    </thead>
                    <tbody>
                </table>
                <p style="text-align: center;"><b>No Meetings organized !</b></p>
               </ng-template>
        </div>
    </div>
    <div *ngIf="reportType === 'attended'">
        <div class="row">
            <div class="col-sm-5" style="margin-left: 50px;">
                <div class="card">
                    <div class="card-header" style="background-color: #134E69D9;">
                        <h4 style="text-align: center;color: white;">Report Summary</h4>
                    </div>
                    <div style="margin-left: 30px;margin-top: 20px;">
                    <p>Report Module : <b>Meetings</b></p>
                    <p>Report Type : <b>Bar</b></p>
                    <p>Attndee Name : <b>{{"Vaishnav Kannan"}}</b></p>
                    <p>Attendee Email ID : <b>{{selectedAttendeeUser}}</b></p>
                    <p>Total Meetings Attended : <b>{{attendedMeetingListCount}}</b></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <b>Meetings</b>
                    </div>
                    <div class="chart">
                        <div style="padding-top: 6px;"></div>
                        <ng-select id="select" [(ngModel)]="selectedAttendeeUser" style="float: right; width: 250px;"
                            placeholder="choose" (change)="chooseAttendedMeetingUser()">
                            <ng-option *ngFor="let employee of employeeListAsUser"
                                value="{{employee.email}}">{{employee.firstName}} {{employee.lastName}}</ng-option>
                        </ng-select>
                        <canvas id="attendedMeetingListChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <table class="table table-hover" *ngIf="attendedMeetingListCount > 0; else noMeetings">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let attehdedMeeting of attendedMeetingList">
                    <td>{{attehdedMeeting.meetingId}}</td>
                    <td>{{attehdedMeeting.subject}}</td>
                    <td>{{attehdedMeeting.organizerName}}</td>
                    <td>{{attehdedMeeting.startDateTime}}</td>
                    <td>{{attehdedMeeting.endDateTime}}</td>
                </tr>
            </tbody>
        </table>
       <ng-template #noMeetings>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
        </table>
        <p style="text-align: center;"><b>No Meetings Attended !</b></p>
       </ng-template>
    </div>
</div>
