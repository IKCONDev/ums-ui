<app-side-menubar></app-side-menubar>
<app-header [title]="title" id="header"></app-header>
<div class="container-fluid">
    <div class="card-header">
        <div class="row">
            <div class="col-sm-2 d-flex">
                <h3 id="heading">Task List</h3>
            </div>
            <div class="col-sm-2 d-flex">
                <p id="AssignedTask" (click)="InitailizeJqueryDataTable()" (click)="getTasks('AssignedTask')">Assigned Tasks</p>
            </div>
            <div class="col-sm-2 d-flex">
                <p (click)="InitailizeJqueryDataTable()" (click)="getTasks('OrganizedTask')" 
                id="OrganizedTask" style="padding-right: 10px;">Organized Tasks
                </p>
            </div>
            <!--<div class="col-sm-1" style="padding-top: 17px;"><button id="add_button"type="btn btn-primary" (click)="addTask()"
                    data-toggle="modal" data-target="#myModal_add">Add</button></div>-->
            <div class="col-sm-3"></div>
            <div *ngIf="tabOpened === 'OrganizedTask'" id="deleteBtnDiv" class="col-sm-2">
               <button class=" form-control" style="width: 80px;" (click)="checkCheckBoxes()">Delete</button>
            </div>
            <div *ngIf="tabOpened === 'AssignedTask'" class="col-sm-1">
             </div>
            <div *ngIf="tabOpened === 'AssignedTask'" class="col-sm-1 d-flex align-items-end"></div>
            <div class="col-sm-1 d-flex" id="filter" data-toggle="modal" data-target="#filterModal" (click)="getActiveUsersEmailIdList()">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none">
                    <path
                        d="M11 18H13C13.55 18 14 17.55 14 17C14 16.45 13.55 16 13 16H11C10.45 16 10 16.45 10 17C10 17.55 10.45 18 11 18ZM3 7C3 7.55 3.45 8 4 8H20C20.55 8 21 7.55 21 7C21 6.45 20.55 6 20 6H4C3.45 6 3 6.45 3 7ZM7 13H17C17.55 13 18 12.55 18 12C18 11.45 17.55 11 17 11H7C6.45 11 6 11.45 6 12C6 12.55 6.45 13 7 13Z"
                        fill="#E5EEF1" />
                </svg>
            </div>

        </div>
    </div>
    <div class="card-body" *ngIf="tabOpened === 'OrganizedTask'">
        <!-- reportee dropdown -->
        <div *ngIf="(loggedInUserRole !== 'ADMIN' && loggedInUserRole !== 'SUPER_ADMIN') && reporteeCount > 0" style="padding-top: 9px; ">
            <ng-select [searchable]="true" [clearable]="true" id="reportee"
            name="reportee" style="width: 400px;"
            [(ngModel)]="selectedReporteeOrganized" placeholder="choose reportee" (change)="storeReporteeDataOfOrganizedTask()">
            <!--<ng-option [value]="" disabled selected value>choose </ng-option>-->

            <ng-option [value]="reportee.email" *ngFor="let reportee of reporteeList">
                {{reportee.email}}
            </ng-option>
        </ng-select>
        </div>
        <!-- reportee dropdown end -->
        <!-- reportee dropdown -->
        <div *ngIf="(loggedInUserRole === 'ADMIN' || loggedInUserRole === 'SUPER_ADMIN') && reporteeCount > 0" style="padding-top: 9px; ">
            <ng-select [searchable]="true" [clearable]="true" id="reportee"
            name="reportee" style="width: 400px;"
            [(ngModel)]="selectedReporteeOrganized" placeholder="choose reportee" (change)="storeReporteeDataOfOrganizedTask()">
            <!--<ng-option [value]="" disabled selected value>choose </ng-option>-->

            <ng-option [value]="reportee.email" *ngFor="let reportee of reporteeList">
                {{reportee.email}}
            </ng-option>
        </ng-select>
        </div><br/>
        <!-- reportee dropdown end -->
        <div calss="row d-flex" *ngIf="taskCount > 0 ; else noMeetings">
            <table id="table"  class="table table-hover">
                <thead style="background-color: #ecf7fc;">
                    <tr>
                        <th><input type="checkbox" class="mainCheckBox" id="mainCheckBox"
                            style="margin: 0px;" (change)="checkSubCheckBoxes()">
                    </th>
                    <th>Task ID</th>
                    <th style="width: 150px;">Title</th>
                    <th>Assignees</th>
                    <th>Start Date & Time</th>
                    <th>End Date & Time</th>
                    <th>Priority</th>
                    <th>Status</th>
                    <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="trbody" *ngFor="let item of task; let i = index">
                        <td><input type="checkbox" value="{{item.taskId}}"
                                class="subCheckBox" id="subCheckBox{{i}}" (change)="toggleMainCheckBox(i)">
                        </td>
                        <!--- <td>{{item.taskId}}</td>-->
                        <td>T000{{item.taskId}}</td>
                        <td id="task-subject">{{item.taskTitle}}</td>
                        <td>{{item.taskOwner}}</td>
                        <td>{{item.startDate|date:'MMM d, y, h:mm a'}}</td>
                        <td>{{item.dueDate|date:'MMM d, y, h:mm a'}}</td>
                        <td>{{item.taskPriority}}</td>
                        <td>{{item.status}}</td>
                        <td>
                            <span class="edit-icon" data-target="#xlModal" data-toggle="modal"
                                (click)="editTask(item.taskId)" (click)="getActiveUsersEmailIdList()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"
                                    fill="none">
                                    <g id="edit">
                                        <path id="Vector"
                                            d="M2.5 14.3761V17.5007H5.62543L14.8475 8.28116L11.7221 5.15659L2.5 14.3761ZM17.2562 5.87316C17.5813 5.54821 17.5813 5.01911 17.2562 4.69416L15.3101 2.7486C14.9851 2.42364 14.4558 2.42364 14.1308 2.7486L12.6056 4.27339L15.731 7.39795L17.2562 5.87316Z"
                                            fill="#5590AA" />
                                    </g>
                                </svg>
                            </span>
                            &nbsp;
                            <span id="trashIcon"  (click)="deleteTaskById(item.taskId)">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                fill="#000000" version="1.1" id="Capa_1" width="15px" height="15px"
                                viewBox="0 0 482.428 482.429" xml:space="preserve">
                                <g>
                                    <g>
                                        <path
                                            d="M381.163,57.799h-75.094C302.323,25.316,274.686,0,241.214,0c-33.471,0-61.104,25.315-64.85,57.799h-75.098    c-30.39,0-55.111,24.728-55.111,55.117v2.828c0,23.223,14.46,43.1,34.83,51.199v260.369c0,30.39,24.724,55.117,55.112,55.117    h210.236c30.389,0,55.111-24.729,55.111-55.117V166.944c20.369-8.1,34.83-27.977,34.83-51.199v-2.828    C436.274,82.527,411.551,57.799,381.163,57.799z M241.214,26.139c19.037,0,34.927,13.645,38.443,31.66h-76.879    C206.293,39.783,222.184,26.139,241.214,26.139z M375.305,427.312c0,15.978-13,28.979-28.973,28.979H136.096    c-15.973,0-28.973-13.002-28.973-28.979V170.861h268.182V427.312z M410.135,115.744c0,15.978-13,28.979-28.973,28.979H101.266    c-15.973,0-28.973-13.001-28.973-28.979v-2.828c0-15.978,13-28.979,28.973-28.979h279.897c15.973,0,28.973,13.001,28.973,28.979    V115.744z" />
                                        <path
                                            d="M171.144,422.863c7.218,0,13.069-5.853,13.069-13.068V262.641c0-7.216-5.852-13.07-13.069-13.07    c-7.217,0-13.069,5.854-13.069,13.07v147.154C158.074,417.012,163.926,422.863,171.144,422.863z" />
                                        <path
                                            d="M241.214,422.863c7.218,0,13.07-5.853,13.07-13.068V262.641c0-7.216-5.854-13.07-13.07-13.07    c-7.217,0-13.069,5.854-13.069,13.07v147.154C228.145,417.012,233.996,422.863,241.214,422.863z" />
                                        <path
                                            d="M311.284,422.863c7.217,0,13.068-5.853,13.068-13.068V262.641c0-7.216-5.852-13.07-13.068-13.07    c-7.219,0-13.07,5.854-13.07,13.07v147.154C298.213,417.012,304.067,422.863,311.284,422.863z" />
                                    </g>
                                </g>
                            </svg>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div>
            <ng-template #noMeetings>
                <table class="table table-hover">
                    <thead style="background-color: #ecf7fc; padding-top:0px;">
                        <th style="padding-left: 22px;"><input type="checkbox" class="box" style="margin: 0px;"></th>
                        <th>UID</th>
                        <th>Title</th>
                        <th>ActionItem</th>
                        <th>Assignees</th>
                        <th>Start Date & Time</th>
                        <th>End Date & Time</th>
                        <th>Priority</th>
                        <th>Status</th>
                        <th></th>
                    </thead>
                </table>
                <p id="no-meetings">No Tasks Organized Yet ! </p>
            </ng-template>
        </div>
        <!--  -->
    </div>
    <!-- ngif -->
    <div class="card-body" *ngIf="tabOpened === 'AssignedTask'">
        <!-- reportee dropdown -->
        <div *ngIf="(loggedInUserRole !== 'ADMIN' && loggedInUserRole !== 'SUPER_ADMIN') && reporteeCount > 0" style="padding-top: 9px; ">
            <ng-select [searchable]="true" [clearable]="true" id="reportee"
            name="reportee" style="width: 400px;"
            [(ngModel)]="selectedReporteeAssigned" placeholder="choose reportee" (change)="storeReporteeDataOfAssignedTask()">
            <!--<ng-option [value]="" disabled selected value>choose </ng-option>-->

            <ng-option [value]="reportee.email" *ngFor="let reportee of reporteeList">
                {{reportee.email}}
            </ng-option>
        </ng-select>
        </div>
        <div *ngIf="(loggedInUserRole === 'ADMIN' || loggedInUserRole === 'SUPER_ADMIN') && reporteeCount > 0" style="padding-top: 9px; ">
            <ng-select [searchable]="true" [clearable]="true" id="reportee"
            name="reportee" style="width: 400px;"
            [(ngModel)]="selectedReporteeAssigned" placeholder="choose reportee" (change)="storeReporteeDataOfAssignedTask()">
            <!--<ng-option [value]="" disabled selected value>choose </ng-option>-->

            <ng-option [value]="reportee.email" *ngFor="let reportee of reporteeList">
                {{reportee.email}}
            </ng-option>
        </ng-select>
        </div>
        <br/>
        <!-- reportee dropdown end -->
        <div class="row d-flex" *ngIf="assignedTasksCount>0; else noAssignedTasks">
            <table class="table table-hover" height="40" id="assignedtaskTable">
                <thead id="thead" style="background-color: #ecf7fc; padding-top: 0px;">
                    <tr>
                    <th>Task ID</th>
                    <th style="width: 150px;">Title</th>
                    <th>Owner</th>
                    <th>Start Date & Time</th>
                    <th>End Date & Time</th>
                    <th style="padding-left:6px;">Priority</th>
                    <th>Status</th>
                    <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let task of assignedTasks; let i = index">
                        <td>T000{{task.taskId}}</td>
                        <td id="task-subject">{{task.taskTitle}}</td>
                        <td>{{task.taskOwner}}</td>
                        <td>{{task.startDate|date:'MMM d, y, h:mm a'}}</td>
                        <td>{{task.dueDate|date:'MMM d, y, h:mm a'}}</td>
                        <td>{{task.taskPriority}}</td>
                        <td>{{task.status}}</td>
                        <td>
                            <span class="edit-icon" data-target="#assignedmodal" data-toggle="modal"
                                (click)="editTask(task.taskId)" (click)="getActiveUsersEmailIdList()">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"
                                    fill="none">
                                    <g id="edit">
                                        <path id="Vector"
                                            d="M2.5 14.3761V17.5007H5.62543L14.8475 8.28116L11.7221 5.15659L2.5 14.3761ZM17.2562 5.87316C17.5813 5.54821 17.5813 5.01911 17.2562 4.69416L15.3101 2.7486C14.9851 2.42364 14.4558 2.42364 14.1308 2.7486L12.6056 4.27339L15.731 7.39795L17.2562 5.87316Z"
                                            fill="#5590AA" />
                                    </g>
                                </svg>
                            </span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div>
            <ng-template #noAssignedTasks>
                <table class="table table-hover">
                    <thead id="thead">
                        <th>Id</th>
                        <th>Title</th>
                        <th>Organizer</th>
                        <th>Start Date & Time</th>
                        <th>End Date & Time</th>
                    </thead>
                </table>
                <p id="no-meetings">No Tasks Assigned Yet!</p>
            </ng-template>
        </div>
    </div>
</div>

<!-- Button to trigger the modal -->


<!-- The Modal
<div class="modal" id="myModal">
    <div class="modal-dialog">
        <div class="modal-content">

            
            <div class="modal-header">
                <h5 class="modal-title">Modal Title</h5>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>

            
            <div class="modal-body">
                <p>This is a Bootstrap 4.6.2 modal. You can place content here.</p>
            </div>

            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save Changes</button>
            </div>

        </div>
    </div>
</div> -->


<!---Organized modal-->
<div class="modal fade" id="xlModal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog"
    aria-labelledby="xlModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header" style="background-color: #134E69D9; color: #ecf7fc;">
                <h5 class="modal-title" id="xlModalLabel">Update Task</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"
                    (click)="clearErrorMessages(form)">
                    <span aria-hidden="true" style="color:white; padding: 5px; padding-top: 0px;">&times;</span>
                </button>
            </div>
            <form #form="ngForm" method="POST">
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <label style="margin-left: 30px; font-size: 20px;"><b>Task Title</b><span id="required">*</span></label><br>
                            <textarea type="text"
                                style="margin-left: 30px;width: 530px;background-color: #ecf7fc;min-height:55px ;max-height: 55px;"
                                placeholder="Enter Title" class="form-control" name="taskTitle" required="true"
                                [(ngModel)]="update_Task.taskTitle" #taskTitle="ngModel"
                                [class.invalid]="taskTitle.invalid && taskTitle.touched" (keyup)="validateTaskTitle()"
                                minlength="5" maxlength="50"></textarea>
                            <div *ngIf="taskTitleErrrorInfo !=''">
                                <span style="margin-left: 25px; color: red;">{{taskTitleErrrorInfo}}</span>
                            </div>
                        </div>

                    </div>

                    <div class="row" style="margin: 20px;">
                        <label style="font-size: 20px;"><b>Description</b><span id="required">*</span></label>
                        <div class="col-md-6">

                            <div style=" width:530px; height: 250px; background-color: #ecf7fc;">
                                <div class="col-md-12" style="background-color: #134E69D9; height: 40px;">
                                    <!--<label id="details-label" style="padding: left 5px;padding-top: 5px;">Normal
                                        Text</label>-->
                                </div>
                                <textarea
                                    style="width: 530px;height: 220px;min-height: 220px; max-height:220px;background-color: #ecf7fc;"
                                    class="form-control" name="taskDescription" #taskDescription="ngModel"
                                    [(ngModel)]="update_Task.taskDescription"
                                    [class.invalid]="taskDescription.invalid && taskDescription.touched"
                                    (keyup)="validateTaskDescription()" placeholder="Enter description !..."
                                    minlength="10" maxlength="250"></textarea>
                                <div *ngIf="taskDescriptionErrorInfo!=''">
                                    <span id="error_msg">{{taskDescriptionErrorInfo}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-4"
                            style=" width:400px; height: 380px; background-color: #ecf7fc;margin-top:-140px">
                            <div class="row" style="background-color: #134E69D9;height: 40px;">
                                <label id="details-label" style="padding-top: 5px;">Details</label>
                            </div>
                            <div class="row" id="details-section">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td><b>Assignee</b><span id="required">*</span> </td>
                                            <!--<td><span><input type="text"
                                            [(ngModel)]="update_Task.taskOwner" name="taskOwner"></span>
                                        </td>-->
                                            <!-- <td>
                                                <div>
                                                    <ng-select [searchable]="true" [clearable]="true" id="taskOwner"
                                                        name="taskOwner" (change)="validateTaskOwner()"
                                                        style="margin-top: 4px;" [(ngModel)]="update_Task.taskOwner">
                                                        <ng-option disabled selected value>choose</ng-option>
                                                        <ng-option [value]="emailId"
                                                            *ngFor="let emailId of userEmailIdList"> {{emailId}}
                                                        </ng-option>
                                                    </ng-select>
                                                  <div *ngIf="taskOwnerErrorInfo != ''">
                                                    <span style="padding-top: 20px;"
                                                        id="error_msg">{{taskOwnerErrorInfo}}</span>
                                                   </div>
                                            </div>
                                            </td> -->
                                            <td>
                                                <div>
                                                    <ng-select [searchable]="true" [clearable]="true" id="taskOwner"
                                                        name="taskOwner" (change)="validateTaskOwner()"
                                                        style="margin-top: 4px;" [(ngModel)]="update_Task.taskOwner">
                                                        <ng-option disabled selected value>choose</ng-option>
                                                        <ng-option [value]="emailId"
                                                            *ngFor="let emailId of userEmailIdList"> {{emailId}}
                                                        </ng-option>
                                                    </ng-select>
                                                
                                                <div *ngIf="taskOwnerErrorInfo != ''">
                                                    <span style="padding-top: 20px;"
                                                        id="error_msg">{{taskOwnerErrorInfo}}</span>
                                                </div>
                                            </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><label for="prority"><b>Priority</b><span id="required">*</span></label></td>
                                            <td><span><select id="priority" class="form-control form-select"
                                                        [(ngModel)]="update_Task.taskPriority" name="taskPriority"
                                                        #taskPriority="ngModel"
                                                        [class.invalid]="taskPriority.invalid && taskPriority.touched"
                                                        (click)="validateTaskPriority()">
                                                        <option disabled selected value>select</option>
                                                        <option>High</option>
                                                        <option>Medium</option>
                                                        <option>Low</option>
                                                    </select></span>
                                                <div *ngIf="taskPriorityErrorInfo!=''">
                                                    <span id="error_msg">{{taskPriorityErrorInfo}}</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>Start Date & Time</b><span id="required">*</span></td>
                                            <td><span><input type="datetime-local" min="{{min}}" class="form-control"
                                                id="taskStartDate" name="taskStartDate" [(ngModel)]="update_Task.startDate"
                                                        #taskStartDate="ngModel" required="true"
                                                        [class.invalid]="taskStartDate.invalid && taskStartDate.touched"
                                                        (change)="validateTaskStartDate()"></span>
                                                <div *ngIf="taskStartDateErrorInfo!=''">
                                                    <span id="error_msg">{{taskStartDateErrorInfo}}</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>End Date & Time</b><span id="required">*</span></td>
                                            <td><span> <input type="datetime-local" min="{{min}}" class="form-control"
                                                        name="taskDueDate" [(ngModel)]="update_Task.dueDate"
                                                        #taskDueDate="ngModel" required="true"
                                                        [class.invalid]="taskDueDate.invalid && taskDueDate.touched"
                                                        (change)="validateTaskDueDate()"></span>
                                                <div *ngIf="taskDueDateErrorInfo !=''">
                                                    <span id="error_msg">{{taskDueDateErrorInfo}}</span>
                                                </div>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td><b>Status</b><span id="required">*</span></td>
                                            <td> <span><select value="Yet To Start" class="form-control form-select"
                                                        name="taskStatus" placeholder="select"
                                                        #taskStatus="ngModel"
                                                        [(ngModel)]="update_Task.status" required="true"
                                                        [class.invalid]="taskStatus.invalid && taskStatus.touched"
                                                        (click)="validateTaskStatus()">
                                                       <!--- <option default>Select</option>-->
                                                        <option>Yet to start</option>
                                                        <option>Inprogress</option>
                                                        <option>Completed</option>
                                                    </select>
                                                    <div *ngIf="taskStatusErrorInfo !=''">
                                                        <span id="error_msg">{{taskStatusErrorInfo}}</span>
                                                    </div>
                                                </span></td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer" role="alert"
                    style="margin-top:-16px;margin-left: 20px; margin-bottom: -11px;">
                    <button type="submit" class="btn btn-primary saveButton" (click)="updateTaskDetails(form)"
                        [(ngModel)]="update_Task" [disabled]="isSaveButtonDisabled"
                        style="margin-bottom:3px; margin-top: -5px;">Save</button>
                    <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        (click)=" clearErrorMessages(form)">Close</button> -->
                    <button type="button" id="closeUpdateModal" class="btn btn-outline-danger closeButton"
                        data-dismiss="modal" (click)="clearErrorMessages(form)"
                        style="margin-bottom:4px; margin-top: -4px;">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!---Assigne modal-->
<div class="modal fade" id="assignedmodal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog"
    aria-labelledby="xlModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header" style="background-color: #134E69D9; color: #ecf7fc;">
                <h5 class="modal-title" id="xlModalLabel">Update Task</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="color:white; padding: 5px; padding-top: 0px;">&times;</span>
                </button>
            </div>
            <form #form="ngForm" method="POST">
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <label style="margin-left: 30px; font-size: 20px;"><b>Task Title</b><span id="required">*</span></label><br>
                            <textarea type="text"
                                style="margin-left: 30px;width: 530px;min-height: 55px;max-height: 55px;background-color: #ecf7fc;"
                                class="form-control" name="taskTitle" required="true"
                                [(ngModel)]="update_Task.taskTitle" #taskTitle="ngModel"
                                [class.invalid]="taskTitle.invalid && taskTitle.touched" (keyup)="validateTaskTitle()"
                                disabled></textarea>
                            <div *ngIf="taskTitleErrrorInfo !=''">
                                <span style="margin-left: 25px; color: red;">{{taskTitleErrrorInfo}}</span>
                            </div>
                        </div>

                    </div>

                    <div class="row" style="margin: 20px;">
                        <label style="font-size: 20px;"><b>Description</b><span id="required">*</span></label>
                        <div class="col-md-6">

                            <div style=" width:530px; height: 250px; background-color: #ecf7fc;" disabled>
                                <div class="col-md-12" style="background-color: #134E69D9; height: 40px;">
                                    <!--<label id="details-label" style="padding: left 5px;padding-top: 5px;">Normal
                                        Text</label>-->
                                </div>
                                <textarea
                                    style="width: 530px; min-height:220px;max-height:220px;background-color:#ecf7fc;"
                                    class="form-control" name="taskDescription" #taskDescription="ngModel"
                                    [(ngModel)]="update_Task.taskDescription"
                                    [class.invalid]="taskDescription.invalid && taskDescription.touched"
                                    (keyup)="validateTaskDescription()" placeholder="Enter description !..."
                                    minlength="10" maxlength="250" disabled></textarea>
                                <div *ngIf="taskDescriptionErrorInfo!=''">
                                    <span id="error_msg">{{taskDescriptionErrorInfo}}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-1"></div>
                        <div class="col-md-4"
                            style=" width:400px; height: 380px; background-color: #ecf7fc;margin-top:-140px">
                            <div class="row" style="background-color: #134E69D9;height: 40px;">
                                <label id="details-label" style="padding-top: 5px;">Details</label>
                            </div>
                            <div class="row" id="details-section">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td><b>Assignee</b> <span id="required">*</span> </td>
                                            <!--<td><span><input type="text"
                                            [(ngModel)]="update_Task.taskOwner" name="taskOwner"></span>
                                        </td>-->
                                            <td>
                                                <div>
                                                    <ng-select [searchable]="true" [clearable]="true" id="taskOwner"
                                                        name="taskOwner" (change)="validateTaskOwner()"
                                                        style="margin-top: 4px;" [(ngModel)]="update_Task.taskOwner"
                                                        disabled>
                                                        <ng-option [value]="">choose</ng-option>
                                                        <ng-option [value]="emailId"
                                                            *ngFor="let emailId of userEmailIdList"> {{emailId}}
                                                        </ng-option>
                                                    </ng-select>
                                                </div>
                                                <br>
                                                <div *ngIf="taskOwnerErrorInfo != ''">
                                                    <span style="padding-top: 20px;"
                                                        id="error_msg">{{taskOwnerErrorInfo}}</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><label for="prority"><b>Priority</b></label></td>
                                            <td><span><select id="priority" class="form-control"
                                                        [(ngModel)]="update_Task.taskPriority" name="taskPriority"
                                                        #taskPriority="ngModel"
                                                        [class.invalid]="taskPriority.invalid && taskPriority.touched"
                                                        (click)="validateTaskPriority()" disabled>
                                                        <option value="select">select</option>
                                                        <option>High</option>
                                                        <option>Medium</option>
                                                        <option>Low</option>
                                                    </select></span>
                                                <div *ngIf="taskPriorityErrorInfo!=''">
                                                    <span id="error_msg">{{taskPriorityErrorInfo}}</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>Start Date & Time</b></td>
                                            <td><span><input type="datetime-local" min="{{min}}" class="form-control"
                                                         name="taskStartDate" [(ngModel)]="update_Task.startDate"
                                                        #taskStartDate="ngModel" required="true" 
                                                        [class.invalid]="taskStartDate.invalid && taskStartDate.touched"
                                                        (click)="validateTaskStartDate()" disabled></span>
                                                <!--- <div *ngIf="taskStartDateErrorInfo!=''">
                                                    <span id="error_msg">{{taskStartDateErrorInfo}}</span>
                                                </div>-->

                                            </td>
                                        </tr>
                                        <tr>
                                            <td><b>End Date & Time</b></td>
                                            <td><span> <input type="datetime-local" min="{{min}}" class="form-control"
                                                        name="taskDueDate" [(ngModel)]="update_Task.dueDate"
                                                        #taskDueDate="ngModel" required="true"
                                                        [class.invalid]="taskDueDate.invalid && taskDueDate.touched"
                                                        (click)="validateTaskDueDate()" disabled></span>
                                                <!---  <div *ngIf="taskDueDateErrorInfo !=''">
                                                    <span id="error_msg">{{taskDueDateErrorInfo}}</span>
                                                </div>-->
                                            </td>
                                        </tr>

                                        <tr>
                                            <td><b>Status</b> <span id="required">*</span></td>
                                            <td> <span><select value="Yet To Start" class="form-control"
                                                        name="taskStatus" [(ngModel)]="update_Task.status"
                                                        required="true" #taskStatus="ngModel"
                                                        [class.invalid]="taskStatus.invalid && taskStatus.touched"
                                                        (click)="validateTaskStatus()">
                                                        <option disabled selected value>Select</option>
                                                        <option>Yet to start</option>
                                                        <option>Inprogress</option>
                                                        <option>Completed</option>
                                                    </select>
                                                    
                                                    <div *ngIf="taskStatusErrorInfo != ''">
                                                        <span id="error_msg">{{taskStatusErrorInfo}}</span>
                                                    </div>
                                                </span></td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer" role="alert"
                    style="margin-top:-16px;margin-left: 20px; margin-bottom: -11px;">
                    <button type="submit" class="btn btn-primary saveButton" (click)="updateTaskDetails(form)"
                        [(ngModel)]="update_Task" [disabled]="isSaveButtonDisabled"
                        style="margin-bottom:3px; margin-top: -5px;">Save</button>
                    <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        (click)=" clearErrorMessages(form)">Close</button> -->
                    <button type="button" id="closeAssignedUpdateModal" class="btn btn-outline-danger closeButton"
                        data-dismiss="modal" (click)="clearErrorMessages(form)"
                        style="margin-bottom:4px; margin-top: -4px;">Close</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- custom advanced filter modal -->
<div class="modal" id="filterModal">
    <div class="modal-dialog" id="dialog">
      <div class="modal-content"> 
        <div class="filters-action-item">
          <div class="filters-parent">
              <div class="filters">Filters</div>
              <img class="cross-icon" alt="" src="../../assets/images/cross.svg" 
              id="closeModal" data-dismiss="modal" (click)="CloseFilterTaskModal()" style="cursor: pointer;">
          </div>
          <div class="filter-dd">              
              <div class="meeting-title-dd-parent">
                  <!-- <div class="meeting-title-dd">
                      <div class="meeting-title-filter">
                          <input type ="text" #box placeholder="ActionItem Name" name="actitemName" />
                          <img class="search-icon" alt="" src="../../assets/images/search.svg">                          
                      </div>          					
                  </div> -->
                  <div class="meeting-title-dd">
                    <div class="meeting-title-filter">
                        <input type ="text" [(ngModel)]="filter_Taskname" #boxTaskName placeholder="Task Name" name="taskName" />
                        <img class="search-icon" alt="" src="../../assets/images/search.svg">                          
                    </div>          					
                </div>
                  <div class="meeting-title-dd">
                      <div >Organizer
                          <select [(ngModel)] = "filter_Email_Organizer" #boxOrg class="actitem-organizer-filter">
                            <option value="">Select</option>
                            <option *ngFor="let userEmail of userEmailIdList" value="{{userEmail}}">{{userEmail}}</option>
                        </select>
                      </div>
                  </div>
                  <div class="meeting-title-dd">
                    <div >Task Priority
                        <select [(ngModel)] = "filter_Priority" #boxPri class="actitem-organizer-filter">
                          <option value="">Select</option>
                          <option>High</option>
                          <option>Medium</option>
                          <option>Low</option>
                      </select>
                    </div>
                </div>
                  <div class="date-range">
                      <div class="date-parent">
                          <input type="datetime-local" #boxStart [(ngModel)] = "filter_StartDate" />
                      </div>
                      <div class="to">To</div>
                      <div class="date-parent">
                          <input type="datetime-local" #boxEnd [(ngModel)] = "filter_EndDate" />
                      </div>
                  </div>
              </div>
          </div>
          <div class="submit-button-parent">
              <button type="button" class="submit-button" (click)="filterTaskList(boxTaskName.value, boxOrg.value, boxPri.value, boxStart.value, boxEnd.value)">Apply</button>
              <button type="button" class="delete-button" (click)="resetFilterModal()"  >Clear</button>
          </div>
      </div>  
      </div>
    </div>
</div>