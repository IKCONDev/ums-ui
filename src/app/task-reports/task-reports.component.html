<div>
    <app-side-menubar></app-side-menubar>
</div>
<div>
    <app-header [title]="title"></app-header>
</div>
<div class="container-fluid">
    <div class="row">
        <!-- <div *ngIf="reportType==='employees'">
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-header">
                        <b>Tasks</b>
                    </div>
                    <div class="chart">
                        <div style="padding-top: 6px;"></div>
                        <canvas id="taskListChart"></canvas>
                    </div>
                </div>
            </div>
        </div> -->
    <div class="card-body" *ngIf="reportType === 'department';">
        <div class="row">
            <div class="col-sm-2" style="margin-left: 100px;">
                <ng-select id="select" [(ngModel)]="selectedDepartment" style="float: right; width: 250px;"
                placeholder="choose" (change)="chooseDepartment()">
                <ng-option *ngFor="let department of departmentList"
                    value="{{department.departmentId}}">{{department.departmentName}}</ng-option>
            </ng-select>
            </div>
        </div>
         <br/>
        <div class="row">
            <div class="col-sm-5" style="margin-left: 50px;">
                <div class="card">
                    <div class="card-header" style="background-color: #134E69D9;">
                        <h4 style="text-align: center;color: white;">Report Summary</h4>
                    </div>
                    <div style="margin-left: 30px;margin-top: 20px;">
                    <p>Report Module : <b>Tasks</b></p>
                    <p>Report Type : <b>Doughnut Chart</b></p>
                    <p>Report For : <b>{{"Department"}}</b></p>
                    <p>Department ID : <b>{{selectedDepartment}}</b></p>
                    <p>Department Name : <b>{{departmentName}}</b></p>
                    <p>Total tasks for the department : <b>{{taskListByDepartmentCount}}</b></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div id="chartHeading" class="card-header">
                        <b id="reportheading">Tasks</b>
                        <a style="color: #fff;" (click)="setChartType('line')">Line</a>
                        <a style="color: #fff;"(click)="setChartType('bar')">Bar</a>
                        <a style="color: #fff;"(click)="setChartType('pie')">Pie</a>
                        <a style="color: #fff;"(click)="setChartType('doughnut')">Doughnut</a>
                        
                    </div>
                    <div class="chart">
                        <!-- <ng-select id="select" [(ngModel)]="selectedDepartment" style="float: right; width: 250px;"
                            placeholder="choose" (change)="chooseDepartment()">
                            <ng-option *ngFor="let department of departmentList"
                                value="{{department.departmentId}}">{{department.departmentName}}</ng-option>
                        </ng-select> -->
                        <canvas id="taskListByDepartmentChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    <br/>
    <table class="table table-hover" *ngIf="taskListByDepartmentCount > 0; else noPriMeetings">
        <thead>
            <tr >
                <th>ID</th>
                <th>Title</th>
                <th>Organizer</th>
                <th>Priority</th>
                <th>Planned Start Date</th>
                <th>Planned End Date</th>
                <th>Department ID</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of taskListByDepartment">
                <td>{{task.taskId}}</td>
                <td>{{task.taskTitle}}</td>
                <td>{{task.emailId}}</td>
                <td>{{task.taskPriority}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.dueDate}}</td>
                <td>{{task.departmentId}}</td>
            </tr>
        </tbody>
    </table>
    <ng-template #noPriMeetings>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Priority</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
        </table>
        <p style="text-align: center;"><b>No Tasks from this department !</b></p>
       </ng-template>
    </div>
    <!-- report -2 -->
    <div class="card-body" *ngIf="reportType === 'organized';">
        <div class="row">
            <div class="col-sm-2" style="margin-left: 100px;">
                <ng-select id="select" [(ngModel)]="selectedTaskOwner" style="float: right; width: 250px;"
                placeholder="choose" (change)="chooseUser()">
                <ng-option *ngFor="let user of umsUsersList" value="{{user}}">{{user}}</ng-option>
            </ng-select>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-sm-5" style="margin-left: 50px;">
                <div class="card">
                    <div class="card-header" style="background-color: #134E69D9;">
                        <h4 style="text-align: center;color: white;">Report Summary</h4>
                    </div>
                    <div style="margin-left: 30px;margin-top: 20px;">
                    <p>Report Module : <b>Tasks</b></p>
                    <!-- <p>Report Type : <b>Bar Chart</b></p> -->
                    <p>Report For : <b>{{"Organizer"}}</b></p>
                    <p>Task Owner email ID : <b>{{selectedTaskOwner}}</b></p>
                    <p>Task Owner Name : <b>{{departmentName}}</b></p>
                    <p>Total tasks for the organizer : <b>{{taskListByTaskOwnerCount}}</b></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <b id="reportheading">Tasks</b>
                    </div>
                    <div class="chart">
                        <!-- <ng-select id="select" [(ngModel)]="selectedTaskOwner" style="float: right; width: 250px;"
                            placeholder="choose" (change)="chooseUser()">
                            <ng-option *ngFor="let user of umsUsersList" value="{{user}}">{{user}}</ng-option>
                        </ng-select> -->
                        <canvas id="taskListByTaskOwnerChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    <br/>
    <table class="table table-hover" *ngIf="taskListByTaskOwnerCount > 0; else noOrgMeetings">
        <thead>
            <tr >
                <th>ID</th>
                <th>Title</th>
                <th>Organizer</th>
                <th>Priority</th>
                <th>Planned Start Date</th>
                <th>Planned End Date</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of taskListByTaskOwner">
                <td>{{task.taskId}}</td>
                <td>{{task.taskTitle}}</td>
                <td>{{task.emailId}}</td>
                <td>{{task.taskPriority}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.dueDate}}</td>
            </tr>
        </tbody>
    </table>
    <ng-template #noOrgMeetings>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Priority</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
        </table>
        <p style="text-align: center;"><b>No Tasks organized !</b></p>
       </ng-template>
    </div>
    <!--  -->
    <div class="card-body" *ngIf="reportType === 'severity';">
        <div class="row">
            <div class="col-sm-2" style="margin-left: 50px;">
                <ng-select id="select" [(ngModel)]="selectedTaskSeverity" style="float: right; width: 190px;"
                            placeholder="choose" (change)="chooseSeverity()">
                            <ng-option value="High">High</ng-option>
                            <ng-option value="Medium">Medium</ng-option>
                            <ng-option value="Low">Low</ng-option>
                </ng-select>
            </div>
        </div>
        <br/>
        <div class="row">
            <div class="col-sm-5" style="margin-left: 50px;">
                <div class="card">
                    <div class="card-header" style="background-color: #134E69D9;">
                        <h4 style="text-align: center;color: white;">Report Summary</h4>
                    </div>
                    <div style="margin-left: 30px;margin-top: 20px;">
                    <p>Report Module : <b>Tasks</b></p>
                    <p>Report Type : <b>Pie Chart</b></p>
                    <p>Report For : <b>{{"Severity (Priority)"}}</b></p>
                    <p>Task Priority : <b>{{selectedTaskSeverity}}</b></p>
                    <p>Total tasks for the severity : <b>{{taskListByTaskSeverityCount}}</b></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <b id="reportheading">Tasks</b>
                    </div>
                    <div class="chart">
                        <!-- <ng-select id="select" [(ngModel)]="selectedTaskSeverity" style="float: right; width: 150px;"
                            placeholder="choose" (change)="chooseSeverity()">
                            <ng-option value="High">High</ng-option>
                            <ng-option value="Medium">Medium</ng-option>
                            <ng-option value="Low">Low</ng-option>
                        </ng-select> -->
                        <canvas id="taskListByTaskSeverityChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    <br/>
    <table class="table table-hover" *ngIf="taskListByTaskSeverityCount > 0; else noSeverityMeetings">
        <thead>
            <tr >
                <th>ID</th>
                <th>Title</th>
                <th>Organizer</th>
                <th>Priority</th>
                <th>Planned Start Date</th>
                <th>Planned End Date</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of taskListByTaskSeverity">
                <td>{{task.taskId}}</td>
                <td>{{task.taskTitle}}</td>
                <td>{{task.emailId}}</td>
                <td>{{task.taskPriority}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.dueDate}}</td>
            </tr>
        </tbody>
    </table>
    <ng-template #noSeverityMeetings>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Priority</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
        </table>
        <p style="text-align: center;"><b>No Tasks !</b></p>
       </ng-template>
    </div>
        <!--  -->
        <!-- <div *ngIf="reportType==='status'">
            <div class="col-sm-4">
                <div class="card">
                    <div class="card-header">
                        <b>Tasks By Status</b>
                    </div>
                    <div class="chart">
                        <ng-select id="select" [(ngModel)]="selectedTaskStatus" style="float: right; width: 150px;"
                            placeholder="choose" (change)="chooseStatus()">
                            <ng-option value="Yet to start">Yet to start</ng-option>
                            <ng-option value="Inprogress">Inprogress</ng-option>
                            <ng-option value="Completed">Completed</ng-option>
                        </ng-select>
                        <canvas id="taskListByTaskStatusChart"></canvas>
                    </div>
                </div>
            </div>
        </div>-->
        <div class="card-body" *ngIf="reportType === 'status';">
            <div class="row">
                <div class="col-sm-2" style="margin-left: 50px;">
                    <ng-select id="select" [(ngModel)]="selectedTaskStatus" style="float: right; width: 190px;"
                    placeholder="choose" (change)="chooseStatus()">
                    <ng-option value="Yet to start">Yet to start</ng-option>
                    <ng-option value="Inprogress">Inprogress</ng-option>
                    <ng-option value="Completed">Completed</ng-option>
                </ng-select>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-sm-5" style="margin-left: 50px;">
                    <div class="card">
                        <div class="card-header" style="background-color: #134E69D9;">
                            <h4 style="text-align: center;color: white;">Report Summary</h4>
                        </div>
                        <div style="margin-left: 30px;margin-top: 20px;">
                        <p>Report Module : <b>Tasks</b></p>
                        <p>Report Type : <b>Bar Chart</b></p>
                        <p>Report For : <b>{{"Status"}}</b></p>
                        <p>Task Status : <b>{{selectedTaskStatus}}</b></p>
                        <p>Total tasks for the status : <b>{{taskListByTaskStatusCount}}</b></p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="card">
                        <div class="card-header">
                            <b id="reportheading">Tasks</b>
                        </div>
                        <div class="chart">
                            <!-- <ng-select id="select" [(ngModel)]="selectedTaskStatus" style="float: right; width: 150px;"
                                placeholder="choose" (change)="chooseStatus()">
                                <ng-option value="Yet to start">Yet to start</ng-option>
                                <ng-option value="Inprogress">Inprogress</ng-option>
                                <ng-option value="Completed">Completed</ng-option>
                            </ng-select> -->
                            <canvas id="taskListByTaskStatusChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        <br/>
        <table class="table table-hover" *ngIf="taskListByTaskStatusCount > 0; else noStatusMeetings">
            <thead>
                <tr >
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Priority</th>
                    <th>Status</th>
                    <th>Planned Start Date</th>
                    <th>Planned End Date</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let task of taskListByTaskStatus">
                    <td>{{task.taskId}}</td>
                    <td>{{task.taskTitle}}</td>
                    <td>{{task.emailId}}</td>
                    <td>{{task.taskPriority}}</td>
                    <td>{{task.status}}</td>
                    <td>{{task.startDate}}</td>
                    <td>{{task.dueDate}}</td>
                </tr>
            </tbody>
        </table>
        <ng-template #noStatusMeetings>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Title</th>
                        <th>Organizer</th>
                        <th>Priority</th>
                        <th>Start Date Time</th>
                        <th>End Date Time</th>
                    </tr>
                </thead>
                <tbody>
            </table>
            <p style="text-align: center;"><b>No Tasks !</b></p>
           </ng-template>
        </div>
        <!--  -->
    <div class="card-body" *ngIf="reportType === 'aged'">
        <div class="row">
            <div class="col-sm-5" style="margin-left: 50px;">
                <div class="card">
                    <div class="card-header" style="background-color: #134E69D9;">
                        <h4 style="text-align: center;color: white;">Report Summary</h4>
                    </div>
                    <div style="margin-left: 30px;margin-top: 20px;">
                    <p>Report Module : <b>Tasks</b></p>
                    <p>Report Type : <b>Pie Chart</b></p>
                    <p>Report For : <b>{{"Aged Tasks"}}</b></p>
                    <p>Tasks Type : <b>{{"Aged"}}</b></p>
                    <p>Aged based on : <b>{{"Planned End Date"}}</b></p>
                    <p>Total aged tasks : <b>{{agedTaskListCount}}</b></p>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <b id="reportheading">Tasks</b>
                    </div>
                    <div class="chart">
                        <div style="padding-top: 12px;"></div>
                        <canvas id="taskListByAge"></canvas>
                    </div>
                </div>
            </div>
        </div>
    <br/>
    <table class="table table-hover" *ngIf="agedTaskListCount > 0; else noAgedMeetings">
        <thead>
            <tr >
                <th>ID</th>
                <th>Title</th>
                <th>Organizer</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Planned Start Date</th>
                <th>Planned End Date</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of agedTaskList">
                <td>{{task.taskId}}</td>
                <td>{{task.taskTitle}}</td>
                <td>{{task.emailId}}</td>
                <td>{{task.taskPriority}}</td>
                <td>{{task.status}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.dueDate}}</td>
            </tr>
        </tbody>
    </table>
    <ng-template #noAgedMeetings>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Priority</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
        </table>
        <p style="text-align: center;"><b>No aged tasks !</b></p>
       </ng-template>
    </div>
    <div class="card-body" *ngIf="reportType === 'all';">
        <div class="row">
            <div class="col-sm-2" style="margin-left: 100px;">
                <ng-select id="select" [(ngModel)]="selectedDepartment" style="float: right; width: 250px;"
                placeholder="choose" (change)="chooseDepartment()">
                <ng-option *ngFor="let department of departmentList"
                    value="{{department.departmentId}}">{{department.departmentName}}</ng-option>
            </ng-select>
            </div>
        </div>
         <br/>
        <div class="row">
            <div class="col-sm-5" style="margin-left: 50px;">
                <div class="card">
                    <div class="card-header" style="background-color: #134E69D9;">
                        <h4 style="text-align: center;color: white;">Report Summary</h4>
                    </div>
                    <div style="margin-left: 30px;margin-top: 20px;">
                    <p>Report Module : <b>Tasks</b></p>
                    <!-- <p>Report Type : <b>Doughnut Chart</b></p> -->
                    <div *ngIf="selectedDepartment != null; else allTasks">
                        <p>DepartmentName : <b>{{departmentName}}</b></p>
                        <p>Total Tasks : <b>{{taskListByDepartmentCount}}</b></p>
                    </div>
                    <ng-template #allTasks>
                        <p>DepartmentName : <b>{{"All"}}</b></p>
                        <p>Total Tasks : <b>{{alltasksCount}}</b></p>
                   </ng-template>
                    <!-- <p>Report For : <b>{{"Department"}}</b></p>
                    <p>Department ID : <b>{{selectedDepartment}}</b></p>
                    <p>Department Name : <b>{{departmentName}}</b></p>
                    <p>Total tasks for the department : <b>{{taskListByDepartmentCount}}</b></p> -->
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="card">
                    <div class="card-header">
                        <b id="reportheading">Tasks</b>
                    </div>
                    <div class="chart">
                        <!-- <ng-select id="select" [(ngModel)]="selectedDepartment" style="float: right; width: 250px;"
                            placeholder="choose" (change)="chooseDepartment()">
                            <ng-option *ngFor="let department of departmentList"
                                value="{{department.departmentId}}">{{department.departmentName}}</ng-option>
                        </ng-select> -->
                        <canvas id="taskListByDepartmentChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    <br/>
    <table class="table table-hover" *ngIf="selectedDepartment==null ; else noPriMeetings">
        <thead>
           <tr>
               <th>ID</th>
               <th>Department Name</th>
               <th>Department Head</th>
               <th>Count of Meetings</th>
           </tr>
       </thead>
       <tbody>

           <tr  *ngFor="let department of deptValueCount">
               <td>{{department.deptId}}</td>
                <td>{{department.departmentName}}</td>
               <td>{{department.departmentHead}}</td>
               <td>{{department.meetingCount}}</td>

               
           </tr>
        </tbody>

   </table>
   <ng-template #noPriMeetings>
    <table class="table table-hover" *ngIf="taskListByDepartmentCount > 0; else noTasks">
        <thead>
            <tr >
                <th>ID</th>
                <th>Title</th>
                <th>Organizer</th>
                <th>Priority</th>
                <th>Planned Start Date</th>
                <th>Planned End Date</th>
                <th>Department ID</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of taskListByDepartment">
                <td>{{task.taskId}}</td>
                <td>{{task.taskTitle}}</td>
                <td>{{task.emailId}}</td>
                <td>{{task.taskPriority}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.dueDate}}</td>
                <td>{{task.departmentId}}</td>
            </tr>
        </tbody>
    </table>
   </ng-template>
    <!-- <table class="table table-hover" *ngIf="taskListByDepartmentCount > 0; else noPriMeetings">
        <thead>
            <tr >
                <th>ID</th>
                <th>Title</th>
                <th>Organizer</th>
                <th>Priority</th>
                <th>Planned Start Date</th>
                <th>Planned End Date</th>
                <th>Department ID</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of taskListByDepartment">
                <td>{{task.taskId}}</td>
                <td>{{task.taskTitle}}</td>
                <td>{{task.emailId}}</td>
                <td>{{task.taskPriority}}</td>
                <td>{{task.startDate}}</td>
                <td>{{task.dueDate}}</td>
                <td>{{task.departmentId}}</td>
            </tr>
        </tbody>
    </table> -->
    <ng-template #noTasks>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Organizer</th>
                    <th>Priority</th>
                    <th>Start Date Time</th>
                    <th>End Date Time</th>
                </tr>
            </thead>
            <tbody>
        </table>
        <p style="text-align: center;"><b>No Tasks from this department !</b></p>
       </ng-template>
    </div>
    <!-- <div style="text-align: center;">
    <p style="padding-top: 250px; font-size: 50px; padding-left: 40px;" >This page is under implementation</p>

</div> -->